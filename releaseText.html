<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/chunk.css">
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/releaseText.css">
    <link rel="stylesheet" href="./css/element.css">
    <script src="./js/vue.min.js"></script>
    <script src="./js/vue.min.js"></script>
    <script src="./js/element.js"></script>
    <title>发布消息</title>
</head>

<body>
    <div id="app">
        <!-- 头部 -->
        <div class="header">
            <div class="headerBox">
                <div class="headerLogo">
                    <img src="./img/logo.png" alt />
                </div>
                <div class="headerNavBox">
                    <ul class="qfNavListBox">
                        <li> <a href="./index.html" class="navList active ">首页</a> </li>
                        <li> <a href="./information.html" class="navList ">信息汇总</a> </li>
                        <li> <a href="./release.html" class="navList">我要发布</a> </li>
                        <li> <a href="./specialSeats.html" class="navList">总共专席</a> </li>
                    </ul>
                </div>
                <div class="headerSearchBox">
                    <p>
                        <span>欢迎您：</span>
                        <span>andy</span>
                    </p>
                    <div class="inputBox">
                        <el-input placeholder="输入关键字" v-model="searchContent">
                            <el-button slot="append" style="color:#909399" @click="goSearch()">搜索</el-button>
                        </el-input>
                    </div>
                </div>
            </div>
        </div>
        <!-- 内容 -->
        <div class="releaseText">
            <div class="releaseBox">

                <el-form :model="releaseInfo" :rules="rules" ref="releaseInfo" class="demo-ruleForm"
                    label-position="left" label-width="100px">
                    <p class="pTitle">填写资料</p>
                    <div class="typeBox">
                        <el-input type="textarea" :autosize="{ minRows: 6, maxRows: 8}" placeholder="描述详情"
                            v-model="releaseInfo.content">
                        </el-input>
                    </div>
                    <p class="pTitle">添加视频或图片</p>
                    <div class="typeBox1">
                        <el-upload action="上传地址" :data="uploadData" list-type="picture-card">
                            <i class="el-icon-plus"></i>
                        </el-upload>
                        <el-dialog :visible.sync="dialogVisible">
                            <img width="100%" :src="dialogImageUrl" alt="">
                        </el-dialog>
                        </el-input>
                    </div>
                    <el-form-item label="联系人" style="margin-top: 30px;">
                        <el-input v-model="releaseInfo.name"></el-input>
                    </el-form-item>
                    <el-form-item label="联系电话" style="margin-top: 30px;">
                        <el-input v-model="releaseInfo.phone"></el-input>
                    </el-form-item>
                    <el-form-item label="联系地址" style="margin-top: 30px;">
                        <el-input v-model="releaseInfo.dizhi"></el-input>
                    </el-form-item>
                </el-form>
                <div class="buttonBox">
                    <div class="button" @click="submitDataFn()">
                        确认提交
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="footerTop">
                <span>联系我们</span>
                <span>法律援助</span>
            </div>
            <div class="footetButtom">电猫网信息共享平台 http://dianmao.com 版权所有 Copyright @ 2003-2020 State Grid Corporation of
                China（SGCC）.All rights reserved</div>
        </div>
    </div>
    <script type="text/javascript">
        new Vue({
            el: '#app',
            data() {
                return {
                    searchContent: '',
                    releaseInfo: {

                    },
                    rules: {},
                    uploadData: {},
                    listData: {
                        id: ''
                    },
                    dialogVisible:false,
                    dialogImageUrl:[]
                }
            },

            computed: {},
            creted() { },
            components: {
            },
            mounted() {
                this.listData.id = this.getQueryVariable('type')

            },
            methods: {
                goSearch() {
                    if (this.searchContent) {
                        window.location.href = `searchPage.html?id=${this.searchContent}`;
                    } else {
                        this.$message.error('请输入所要搜索的信息！');
                    }

                },
                getQueryVariable(variable) {
                    var query = window.location.search.substring(1);
                    var vars = query.split("&");
                    for (var i = 0; i < vars.length; i++) {
                        var pair = vars[i].split("=");
                        if (pair[0] == variable) { return pair[1]; }
                    }
                    return (false);
                },
                submitDataFn() {
                    console.log('数据提交')
                }
            }

        })
    </script>
</body>

</html>